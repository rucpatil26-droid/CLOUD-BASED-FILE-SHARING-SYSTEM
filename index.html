<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cloud based File Sharing System</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(to right, #f8f9fa, #e9ecef);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .navbar {
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .card {
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.08);
    }
    .btn-sm {
      margin-right: 6px;
    }
    table tbody tr:hover {
      background-color: #f1f3f5;
      transition: 0.2s;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#"><i class="fa-solid fa-cloud"></i>Cloud File Sharing System</a>
  </div>
</nav>

<div class="container mt-5">

  <!-- Heading -->
  <div class="text-center mb-5">
    <h2 class="fw-bold text-dark">Cloud File Sharing System</h2>
    <p class="text-muted">Upload, Download, Share and Manage Files Easily</p>
  </div>

  <!-- Upload Form -->
  <div class="card p-4 mb-4">
    <h5 class="mb-3"><i class="fa-solid fa-upload text-success"></i> Upload File</h5>
    <form action="/upload" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <input type="file" name="file" class="form-control" required>
      </div>
      <button type="submit" class="btn btn-success">
        <i class="fa-solid fa-circle-up"></i> Upload
      </button>
    </form>
  </div>

  <!-- Files List -->
  <div class="card p-4">
    <h5 class="mb-3"><i class="fa-solid fa-folder-open text-primary"></i> Uploaded Files</h5>
    <div class="table-responsive">
      <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th scope="col">File Name</th>
            <th scope="col" style="width: 30%">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for file in files %}
          <tr>
            <td>{{ file.filename }}</td>
            <td>
              <a href="{{ url_for('download_file', filename=file.filename) }}" class="btn btn-primary btn-sm">
                <i class="fa-solid fa-download"></i> Download
              </a>
              <button class="btn btn-info btn-sm text-white" onclick="copyLink('{{ request.url_root }}uploads/{{ file.filename }}')">
                <i class="fa-solid fa-share-nodes"></i> Share
              </button>
              <a href="{{ url_for('delete_file', file_id=file.id) }}" 
                 class="btn btn-danger btn-sm" 
                 onclick="return confirm('Are you sure you want to delete this file?');">
                <i class="fa-solid fa-trash"></i> Delete
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
function copyLink(link) {
  navigator.clipboard.writeText(link).then(() => {
    alert("Share link copied:\n" + link);
  });
}
</script>
</body>
</html>